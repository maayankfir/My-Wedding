!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","prop-types"],t):t((e=e||self).ReactFormWithConstraints={},e.React,e.PropTypes)}(this,function(s,f,i){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function r(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var p=function(){return(p=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function h(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(i[n[r]]=e[n[r]])}return i}function l(a,o,s,l){return new(s||(s=Promise))(function(e,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,n)}r((l=l.apply(a,o||[])).next())})}function v(i,n){var r,a,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(i,s)}catch(e){t=[6,e],a=0}finally{r=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function y(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function a(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,a=i.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}var e,t,o=function(){function e(){this.listeners=new Map}return e.prototype.emit=function(c){for(var f=[],e=1;e<arguments.length;e++)f[e-1]=arguments[e];return l(this,void 0,void 0,function(){var t,i,n,r,a,o,s,l,d,u;return v(this,function(e){switch(e.label){case 0:if(n=this.listeners.get(c),r=new Array,void 0===n)return[3,8];e.label=1;case 1:e.trys.push([1,6,7,8]),a=y(n),o=a.next(),e.label=2;case 2:return o.done?[3,5]:(s=o.value,d=(l=r).push,[4,s.apply(void 0,m(f))]);case 3:d.apply(l,[e.sent()]),e.label=4;case 4:return o=a.next(),[3,2];case 5:return[3,8];case 6:return u=e.sent(),t={error:u},[3,8];case 7:try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}return[7];case 8:return[2,r]}})})},e.prototype.addListener=function(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)},e.prototype.removeListener=function(e,t){var i=this.listeners.get(e),n=i.lastIndexOf(t);i.splice(n,1),0===i.length&&this.listeners.delete(e)},e}(),d="VALIDATE_FIELD_EVENT",u=function(e){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.validateFieldEventEmitter=new o,e}return r(e,t),e.prototype.emitValidateFieldEvent=function(e){return this.validateFieldEventEmitter.emit(d,e)},e.prototype.addValidateFieldEventListener=function(e){this.validateFieldEventEmitter.addListener(d,e)},e.prototype.removeValidateFieldEventListener=function(e){this.validateFieldEventEmitter.removeListener(d,e)},e}(e)},c="FIELD_WILL_VALIDATE_EVENT",F=function(e){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fieldWillValidateEventEmitter=new o,e}return r(e,t),e.prototype.emitFieldWillValidateEvent=function(e){return this.fieldWillValidateEventEmitter.emit(c,e)},e.prototype.addFieldWillValidateEventListener=function(e){this.fieldWillValidateEventEmitter.addListener(c,e)},e.prototype.removeFieldWillValidateEventListener=function(e){this.fieldWillValidateEventEmitter.removeListener(c,e)},e}(e)},E="FIELD_DID_VALIDATE_EVENT",b=function(e){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fieldDidValidateEventEmitter=new o,e}return r(e,t),e.prototype.emitFieldDidValidateEvent=function(e){return this.fieldDidValidateEventEmitter.emit(E,e)},e.prototype.addFieldDidValidateEventListener=function(e){this.fieldDidValidateEventEmitter.addListener(E,e)},e.prototype.removeFieldDidValidateEventListener=function(e){this.fieldDidValidateEventEmitter.removeListener(E,e)},e}(e)},w="FIELD_DID_RESET_EVENT",g=function(e){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fieldDidResetEventEmitter=new o,e}return r(e,t),e.prototype.emitFieldDidResetEvent=function(e){return this.fieldDidResetEventEmitter.emit(w,e)},e.prototype.addFieldDidResetEventListener=function(e){this.fieldDidResetEventEmitter.addListener(w,e)},e.prototype.removeFieldDidResetEventListener=function(e){this.fieldDidResetEventEmitter.removeListener(w,e)},e}(e)},V=function(e){void 0===e.props?(e=e,this.name=e.name,this.type=e.type,this.value=e.value,this.validity=new k(e.validity),this.validationMessage=e.validationMessage):(e=e,this.name=e.props.name,this.type=void 0,this.value=e.props.value,this.validity=void 0,this.validationMessage=void 0)},k=function(e){this.badInput=e.badInput,this.customError=e.customError,this.patternMismatch=e.patternMismatch,this.rangeOverflow=e.rangeOverflow,this.rangeUnderflow=e.rangeUnderflow,this.stepMismatch=e.stepMismatch,this.tooLong=e.tooLong,this.tooShort=e.tooShort,this.typeMismatch=e.typeMismatch,this.valid=e.valid,this.valueMissing=e.valueMissing};(t=e||(e={})).Error="error",t.Warning="warning",t.Info="info",t.WhenValid="whenValid";var D,x=e,L=function(){function e(e){this.name=e,this.validations=[]}return e.prototype.addOrReplaceValidation=function(t){var e=this.validations.findIndex(function(e){return e.key===t.key});-1<e?this.validations[e]=t:this.validations.push(t)},e.prototype.clearValidations=function(){!function(e){for(;e.length;)e.pop()}(this.validations)},e.prototype.hasFeedbacksOfType=function(t,i){return this.validations.some(function(e){return(void 0===i||e.key.startsWith(i+"."))&&e.type===t&&!0===e.show})},e.prototype.hasErrors=function(e){return this.hasFeedbacksOfType(x.Error,e)},e.prototype.hasWarnings=function(e){return this.hasFeedbacksOfType(x.Warning,e)},e.prototype.hasInfos=function(e){return this.hasFeedbacksOfType(x.Info,e)},e.prototype.hasFeedbacks=function(e){return this.hasErrors(e)||this.hasWarnings(e)||this.hasInfos(e)},e.prototype.isValid=function(){return!this.hasErrors()},e}();(D=s.FieldEvent||(s.FieldEvent={})).Added="FIELD_ADDED",D.Removed="FIELD_REMOVED";var R,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new Array,e}return r(e,t),e.prototype.getField=function(t){var e=this.fields.filter(function(e){return e.name===t});return 1===e.length?e[0]:void 0},e.prototype.addField=function(t){if(0===this.fields.filter(function(e){return e.name===t}).length){var e=new L(t);this.fields.push(e),this.emit(s.FieldEvent.Added,e)}},e.prototype.removeField=function(t){var e=this.fields.filter(function(e){return e.name===t}),i=this.fields.indexOf(e[0]);-1<i&&(this.fields.splice(i,1),this.emit(s.FieldEvent.Removed,t))},e.prototype.isValid=function(){return this.fields.every(function(e){return e.isValid()})},e.prototype.hasFeedbacks=function(){return this.fields.some(function(e){return e.hasFeedbacks()})},e}(o),W=function(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?W(t):t)},[])},O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form=null,e.fieldsStore=new S,e.fieldFeedbacksKeyCounter=0,e}return r(e,t),e.prototype.getChildContext=function(){return{form:this}},e.prototype.computeFieldFeedbacksKey=function(){return""+this.fieldFeedbacksKeyCounter++},e.prototype.validateFields=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._validateFields.apply(this,m([!0],e))},e.prototype.validateForm=function(){return this.validateFieldsWithoutFeedback()},e.prototype.validateFieldsWithoutFeedback=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._validateFields.apply(this,m([!1],e))},e.prototype._validateFields=function(u){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];return l(this,void 0,void 0,function(){var t,i,n,r,a,o,s,l,d;return v(this,function(e){switch(e.label){case 0:n=new Array,r=this.normalizeInputs.apply(this,m(c)),e.label=1;case 1:e.trys.push([1,6,7,8]),a=y(r),o=a.next(),e.label=2;case 2:return o.done?[3,5]:(s=o.value,[4,this.validateField(u,new V(s))]);case 3:void 0!==(l=e.sent())&&n.push(l),e.label=4;case 4:return o=a.next(),[3,2];case 5:return[3,8];case 6:return d=e.sent(),t={error:d},[3,8];case 7:try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}return[7];case 8:return[2,n]}})})},e.prototype.validateField=function(n,r){return l(this,void 0,void 0,function(){var t,i;return v(this,function(e){switch(e.label){case 0:return t=r.name,void 0!==(i=this.fieldsStore.getField(t))?[3,1]:[3,3];case 1:return!n&&i.hasFeedbacks()?[3,3]:(i.clearValidations(),this.emitFieldWillValidateEvent(t),[4,this.emitValidateFieldEvent(r)]);case 2:e.sent(),this.emitFieldDidValidateEvent(i),e.label=3;case 3:return[2,i]}})})},e.prototype.normalizeInputs=function(){for(var e,r=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return 0===t.length?(e=(e=m(this.form.querySelectorAll("[name]"))).filter(function(e){return void 0!==e.validity})).filter(function(e){return"checkbox"!==e.type&&"radio"!==e.type}).map(function(e){return e.name}).forEach(function(e,t,i){if(i.indexOf(e)!==t)throw new Error("Multiple elements matching '[name=\""+e+"\"]' inside the form")}):e=t.map(function(e){if("string"!=typeof e)return e;var t='[name="'+e+'"]',i=m(r.form.querySelectorAll(t));if(0<i.filter(function(e){return void 0===e.validity}).length)throw new Error("'"+t+"' should match an <input>, <select> or <textarea>");if(1<i.filter(function(e){return"checkbox"!==e.type&&"radio"!==e.type}).length)throw new Error("Multiple elements matching '"+t+"' inside the form");var n=i[0];if(void 0===n)throw new Error("Could not find field '"+t+"' inside the form");return n}),e},e.prototype.isValid=function(){return this.fieldsStore.isValid()},e.prototype.hasFeedbacks=function(){return this.fieldsStore.hasFeedbacks()},e.prototype.reset=function(){return this.resetFields()},e.prototype.resetFields=function(){for(var u=[],e=0;e<arguments.length;e++)u[e]=arguments[e];return l(this,void 0,void 0,function(){var t,i,n,r,a,o,s,l,d;return v(this,function(e){switch(e.label){case 0:n=new Array,r=this.normalizeInputs.apply(this,m(u)),e.label=1;case 1:e.trys.push([1,6,7,8]),a=y(r),o=a.next(),e.label=2;case 2:return o.done?[3,5]:(s=o.value,[4,this.resetField(new V(s))]);case 3:void 0!==(l=e.sent())&&n.push(l),e.label=4;case 4:return o=a.next(),[3,2];case 5:return[3,8];case 6:return d=e.sent(),t={error:d},[3,8];case 7:try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}return[7];case 8:return[2,n]}})})},e.prototype.resetField=function(n){return l(this,void 0,void 0,function(){var t,i;return v(this,function(e){switch(e.label){case 0:return t=n.name,void 0!==(i=this.fieldsStore.getField(t))?[3,1]:[3,3];case 1:return i.clearValidations(),[4,this.emitFieldDidResetEvent(i)];case 2:e.sent(),e.label=3;case 3:return[2,i]}})})},e.prototype.render=function(){var t=this;return f.createElement("form",p({ref:function(e){return t.form=e}},this.props))},e.childContextTypes={form:i.instanceOf(e).isRequired},e}(g(F(b(u(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(f.Component)))))),I=function(a){function e(e,t){var i=a.call(this,e,t)||this;i.fieldFeedbackKeyCounter=0,i.validate=function(o){return l(i,void 0,void 0,function(){var t,i,n,r,a;return v(this,function(e){switch(e.label){case 0:return t=this.context,i=t.form,n=t.fieldFeedbacks,o.name!==this.fieldName?[3,3]:(a=i.fieldsStore.getField(this.fieldName),n&&("first"===n.props.stop&&a.hasFeedbacks(n.key)||"first-error"===n.props.stop&&a.hasErrors(n.key)||"first-warning"===n.props.stop&&a.hasWarnings(n.key)||"first-info"===n.props.stop&&a.hasInfos(n.key))?[3,3]:[3,1]);case 1:return[4,this._validate(o)];case 2:r=e.sent(),e.label=3;case 3:return[2,r]}})})};var n=t.form,r=t.fieldFeedbacks;if(i.key=r?r.computeFieldFeedbackKey():n.computeFieldFeedbacksKey(),r){if(i.fieldName=r.fieldName,void 0!==e.for)throw new Error("FieldFeedbacks cannot have a parent and a 'for' prop")}else{if(void 0===e.for)throw new Error("FieldFeedbacks cannot be without parent and without 'for' prop");i.fieldName=e.for}return i}return r(e,a),e.prototype.getChildContext=function(){return{fieldFeedbacks:this}},e.prototype.computeFieldFeedbackKey=function(){return this.key+"."+this.fieldFeedbackKeyCounter++},e.prototype.addFieldFeedback=function(){return this.computeFieldFeedbackKey()},e.prototype.componentWillMount=function(){var e=this.context,t=e.form,i=e.fieldFeedbacks;t.fieldsStore.addField(this.fieldName),(i||t).addValidateFieldEventListener(this.validate)},e.prototype.componentWillUnmount=function(){var e=this.context,t=e.form,i=e.fieldFeedbacks;t.fieldsStore.removeField(this.fieldName),(i||t).removeValidateFieldEventListener(this.validate)},e.prototype._validate=function(i){return l(this,void 0,void 0,function(){var t;return v(this,function(e){switch(e.label){case 0:return[4,this.emitValidateFieldEvent(i)];case 1:return t=e.sent(),[2,W(t)]}})})},e.prototype.render=function(){var e=this.props.children;return void 0!==e?e:null},e.defaultProps={stop:"first-error"},e.contextTypes={form:i.instanceOf(O).isRequired,fieldFeedbacks:i.instanceOf(e)},e.childContextTypes={fieldFeedbacks:i.instanceOf(e).isRequired},e}(u(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(f.Component)));(R=s.Status||(s.Status={}))[R.None=0]="None",R[R.Pending=1]="Pending",R[R.Rejected=2]="Rejected",R[R.Resolved=3]="Resolved";var M=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.state={status:s.Status.None},o.validate=function(e){var t,i=o.context,n=i.form,r=i.fieldFeedbacks,a=n.fieldsStore.getField(e.name);return"first"===r.props.stop&&a.hasFeedbacks(r.key)||"first-error"===r.props.stop&&a.hasErrors(r.key)||"first-warning"===r.props.stop&&a.hasWarnings(r.key)||"first-info"===r.props.stop&&a.hasInfos(r.key)?o.setState({status:s.Status.None}):t=o._validate(e),t},o}return r(t,e),t.prototype.getChildContext=function(){return{async:this}},t.prototype.componentWillMount=function(){this.context.fieldFeedbacks.addValidateFieldEventListener(this.validate)},t.prototype.componentWillUnmount=function(){this.context.fieldFeedbacks.removeValidateFieldEventListener(this.validate)},t.prototype._validate=function(n){return l(this,void 0,void 0,function(){var t,i;return v(this,function(e){switch(e.label){case 0:this.setState({status:s.Status.Pending}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.promise(n.value)];case 2:return t=e.sent(),this.setState({status:s.Status.Resolved,value:t}),[3,4];case 3:return i=e.sent(),this.setState({status:s.Status.Rejected,value:i}),[3,4];case 4:return[2,this.emitValidateFieldEvent(n)]}})})},t.prototype.render=function(){var e=this.props,t=this.state,i=null;switch(t.status){case s.Status.None:break;case s.Status.Pending:e.pending&&(i=e.pending);break;case s.Status.Resolved:e.then&&(i=e.then(t.value));break;case s.Status.Rejected:e.catch&&(i=e.catch(t.value))}return i},t.contextTypes={form:i.instanceOf(O).isRequired,fieldFeedbacks:i.instanceOf(I).isRequired},t.childContextTypes={async:i.instanceOf(t).isRequired},t}(u(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(f.Component))),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={fieldIsValid:void 0},t.fieldWillValidate=function(e){e===t.context.fieldFeedbacks.fieldName&&t.setState({fieldIsValid:void 0})},t.fieldDidValidate=function(e){e.name===t.context.fieldFeedbacks.fieldName&&t.setState({fieldIsValid:e.isValid()})},t.fieldDidReset=function(e){e.name===t.context.fieldFeedbacks.fieldName&&t.setState({fieldIsValid:void 0})},t}return r(t,e),t.prototype.componentWillMount=function(){var e=this.context.form;e.addFieldWillValidateEventListener(this.fieldWillValidate),e.addFieldDidValidateEventListener(this.fieldDidValidate),e.addFieldDidResetEventListener(this.fieldDidReset)},t.prototype.componentWillUnmount=function(){var e=this.context.form;e.removeFieldWillValidateEventListener(this.fieldWillValidate),e.removeFieldDidValidateEventListener(this.fieldDidValidate),e.removeFieldDidResetEventListener(this.fieldDidReset)},t.prototype.render=function(){var e=this.props,t=e.style,i=h(e,["style"]);return this.state.fieldIsValid?f.createElement("span",p({},i,{style:p({display:"block"},t)})):null},t.contextTypes={form:i.instanceOf(O).isRequired,fieldFeedbacks:i.instanceOf(I).isRequired},t}(f.Component),N=function(s){function e(e,t){var l=s.call(this,e,t)||this;l.validate=function(e){var t=l.props.when,i=l.context,n=i.form,r=i.fieldFeedbacks,a=n.fieldsStore.getField(e.name),o=p({},l.state.validation);if("first"===r.props.stop&&a.hasFeedbacks(r.key)||"first-error"===r.props.stop&&a.hasErrors(r.key)||"first-warning"===r.props.stop&&a.hasWarnings(r.key)||"first-info"===r.props.stop&&a.hasInfos(r.key))o.show=void 0;else if(o.show=!1,"function"==typeof t)o.show=t(e.value);else{if("string"!=typeof t)throw new TypeError("Invalid FieldFeedback 'when' type: "+typeof t);if("valid"===t)o.show=void 0;else{var s=e.validity;s.valid||("*"===t?o.show=!0:(s.badInput&&"badInput"===t||s.patternMismatch&&"patternMismatch"===t||s.rangeOverflow&&"rangeOverflow"===t||s.rangeUnderflow&&"rangeUnderflow"===t||s.stepMismatch&&"stepMismatch"===t||s.tooLong&&"tooLong"===t||s.tooShort&&"tooShort"===t||s.typeMismatch&&"typeMismatch"===t||s.valueMissing&&"valueMissing"===t)&&(o.show=!0))}}return a.addOrReplaceValidation(o),l.setState({validation:o,validationMessage:e.validationMessage}),o},l.fieldDidReset=function(e){e.name===l.context.fieldFeedbacks.fieldName&&l.setState(function(e){return{validation:p({},e.validation,{show:void 0}),validationMessage:""}})},l.key=t.fieldFeedbacks.addFieldFeedback();var i=e.error,n=e.warning,r=e.info,a=e.when,o=x.Error;if("valid"===a?o=x.WhenValid:n?o=x.Warning:r&&(o=x.Info),o===x.WhenValid&&(i||n||r))throw new Error('Cannot have an attribute (error, warning...) with FieldFeedback when="valid"');return l.state={validation:{key:l.key,type:o,show:void 0},validationMessage:""},l}return r(e,s),e.prototype.componentWillMount=function(){var e=this.context,t=e.form,i=e.fieldFeedbacks,n=e.async;n?n.addValidateFieldEventListener(this.validate):i.addValidateFieldEventListener(this.validate),t.addFieldDidResetEventListener(this.fieldDidReset)},e.prototype.componentWillUnmount=function(){var e=this.context,t=e.form,i=e.fieldFeedbacks,n=e.async;n?n.removeValidateFieldEventListener(this.validate):i.removeValidateFieldEventListener(this.validate),t.removeFieldDidResetEventListener(this.fieldDidReset)},e.prototype.render=function(){var e=this.props,t=(e.when,e.error,e.warning,e.info,e.className),i=e.classes,n=e.style,r=e.children,a=h(e,["when","error","warning","info","className","classes","style","children"]),o=this.state,s=o.validation,l=o.validationMessage,d=i[s.type],u=void 0!==t?t+" "+d:d;if(s.type===x.WhenValid)return f.createElement(_,p({"data-feedback":this.key,style:n,className:u},a),r);if(s.show){var c=void 0!==r?r:l;return f.createElement("span",p({"data-feedback":this.key,className:u,style:p({display:"block"},n)},a),c)}return null},e.defaultProps={when:function(){return!0},classes:{error:"error",warning:"warning",info:"info",whenValid:"when-valid"}},e.contextTypes={form:i.instanceOf(O).isRequired,fieldFeedbacks:i.instanceOf(I).isRequired,async:i.instanceOf(M)},e}(f.Component),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={field:void 0},t.fieldWillValidate=function(e){e===t.props.name&&t.setState({field:"pending"})},t.fieldDidValidate=function(e){e.name===t.props.name&&t.setState({field:e})},t.fieldDidReset=function(e){e.name===t.props.name&&t.setState({field:void 0})},t}return r(t,e),t.prototype.componentWillMount=function(){this.context.form.addFieldWillValidateEventListener(this.fieldWillValidate),this.context.form.addFieldDidValidateEventListener(this.fieldDidValidate),this.context.form.addFieldDidResetEventListener(this.fieldDidReset)},t.prototype.componentWillUnmount=function(){this.context.form.removeFieldWillValidateEventListener(this.fieldWillValidate),this.context.form.removeFieldDidValidateEventListener(this.fieldDidValidate),this.context.form.removeFieldDidResetEventListener(this.fieldDidReset)},t.prototype.fieldValidationStates=function(){var e=this.state.field,t=[];return void 0!==e&&("pending"===e?t.push("isPending"):(e.hasErrors()&&t.push("hasErrors"),e.hasWarnings()&&t.push("hasWarnings"),e.hasInfos()&&t.push("hasInfos"),e.isValid()&&t.push("isValid"))),t},t.prototype.render=function(){var e=this.props,t=e.innerRef,i=e.className,n=e.classes,r=h(e,["innerRef","className","classes"]),a=this.fieldValidationStates(),o=i;return a.forEach(function(e){var t=n[e];void 0!==t&&(void 0!==o?o+=" "+t:o=t)}),f.createElement("input",p({ref:t},r,{className:o}))},t.contextTypes={form:i.instanceOf(O).isRequired},t.defaultProps={classes:{isPending:"is-pending",hasErrors:"has-errors",hasWarnings:"has-warnings",hasInfos:"has-infos",isValid:"is-valid"}},t}(f.Component),T=function(e,i){f.Children.forEach(e,function(e){var t=e;t.props&&t.props.children&&"object"==typeof t.props.children&&T(t.props.children,i),i(t)})};s.FieldFeedbackType=x,s.Field=L,s.EventEmitter=o,s.deepForEach=T,s.FormWithConstraints=O,s.FieldFeedbacks=I,s.FieldFeedback=N,s.FieldFeedbackWhenValid=_,s.Async=M,s.FieldsStore=S,s.ValidateFieldEvent=d,s.withValidateFieldEventEmitter=u,s.FieldWillValidateEvent=c,s.withFieldWillValidateEventEmitter=F,s.FieldDidValidateEvent=E,s.withFieldDidValidateEventEmitter=b,s.FieldDidResetEvent=w,s.withFieldDidResetEventEmitter=g,s.InputElement=V,s.IValidityState=k,s.Input=C,Object.defineProperty(s,"__esModule",{value:!0})});
//# sourceMappingURL=react-form-with-constraints.production.min.js.map
