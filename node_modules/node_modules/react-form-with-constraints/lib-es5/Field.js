"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var FieldFeedbackType_1 = require("./FieldFeedbackType");
var clearArray_1 = require("./clearArray");
var Field = (function () {
    function Field(name) {
        this.name = name;
        this.validations = [];
    }
    Field.prototype.addOrReplaceValidation = function (validation) {
        var i = this.validations.findIndex(function (_validation) { return _validation.key === validation.key; });
        if (i > -1)
            this.validations[i] = validation;
        else
            this.validations.push(validation);
    };
    Field.prototype.clearValidations = function () {
        clearArray_1.default(this.validations);
    };
    Field.prototype.hasFeedbacksOfType = function (type, fieldFeedbacksKey) {
        return this.validations.some(function (fieldFeedback) {
            return (fieldFeedbacksKey === undefined || fieldFeedback.key.startsWith(fieldFeedbacksKey + ".")) &&
                fieldFeedback.type === type && fieldFeedback.show === true;
        });
    };
    Field.prototype.hasErrors = function (fieldFeedbacksKey) {
        return this.hasFeedbacksOfType(FieldFeedbackType_1.default.Error, fieldFeedbacksKey);
    };
    Field.prototype.hasWarnings = function (fieldFeedbacksKey) {
        return this.hasFeedbacksOfType(FieldFeedbackType_1.default.Warning, fieldFeedbacksKey);
    };
    Field.prototype.hasInfos = function (fieldFeedbacksKey) {
        return this.hasFeedbacksOfType(FieldFeedbackType_1.default.Info, fieldFeedbacksKey);
    };
    Field.prototype.hasFeedbacks = function (fieldFeedbacksKey) {
        return this.hasErrors(fieldFeedbacksKey) ||
            this.hasWarnings(fieldFeedbacksKey) ||
            this.hasInfos(fieldFeedbacksKey);
    };
    Field.prototype.isValid = function () {
        return !this.hasErrors();
    };
    return Field;
}());
exports.default = Field;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmllbGQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvRmllbGQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx5REFBb0Q7QUFDcEQsMkNBQXNDO0FBR3RDO0lBR0UsZUFBNEIsSUFBWTtRQUFaLFNBQUksR0FBSixJQUFJLENBQVE7UUFGeEIsZ0JBQVcsR0FBOEIsRUFBRSxDQUFDO0lBRWpCLENBQUM7SUFFNUMsc0NBQXNCLEdBQXRCLFVBQXVCLFVBQW1DO1FBRXhELElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLFVBQUEsV0FBVyxJQUFJLE9BQUEsV0FBVyxDQUFDLEdBQUcsS0FBSyxVQUFVLENBQUMsR0FBRyxFQUFsQyxDQUFrQyxDQUFDLENBQUM7UUFDeEYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7O1lBQ3hDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCxnQ0FBZ0IsR0FBaEI7UUFDRSxvQkFBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRUQsa0NBQWtCLEdBQWxCLFVBQW1CLElBQXVCLEVBQUUsaUJBQTBCO1FBQ3BFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBQSxhQUFhO1lBQ3hDLE9BQUEsQ0FBQyxpQkFBaUIsS0FBSyxTQUFTLElBQUksYUFBYSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUksaUJBQWlCLE1BQUcsQ0FBQyxDQUFDO2dCQUMxRixhQUFhLENBQUMsSUFBSSxLQUFLLElBQUksSUFBSSxhQUFhLENBQUMsSUFBSSxLQUFLLElBQUk7UUFEMUQsQ0FDMEQsQ0FDM0QsQ0FBQztJQUNKLENBQUM7SUFFRCx5QkFBUyxHQUFULFVBQVUsaUJBQTBCO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLDJCQUFpQixDQUFDLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBQzdFLENBQUM7SUFFRCwyQkFBVyxHQUFYLFVBQVksaUJBQTBCO1FBQ3BDLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLDJCQUFpQixDQUFDLE9BQU8sRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBQy9FLENBQUM7SUFFRCx3QkFBUSxHQUFSLFVBQVMsaUJBQTBCO1FBQ2pDLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLDJCQUFpQixDQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFFRCw0QkFBWSxHQUFaLFVBQWEsaUJBQTBCO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQztZQUNqQyxJQUFJLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDO1lBQ25DLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQsdUJBQU8sR0FBUDtRQUNFLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUNILFlBQUM7QUFBRCxDQUFDLEFBNUNELElBNENDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZpZWxkRmVlZGJhY2tWYWxpZGF0aW9uIGZyb20gJy4vRmllbGRGZWVkYmFja1ZhbGlkYXRpb24nO1xuaW1wb3J0IEZpZWxkRmVlZGJhY2tUeXBlIGZyb20gJy4vRmllbGRGZWVkYmFja1R5cGUnO1xuaW1wb3J0IGNsZWFyQXJyYXkgZnJvbSAnLi9jbGVhckFycmF5JztcblxuLy8gRmllbGQgaXMgYSBiZXR0ZXIgbmFtZSB0aGFuIElucHV0LCBzZWUgRGphbmdvIEZvcm0gZmllbGRzIGh0dHBzOi8vZG9jcy5kamFuZ29wcm9qZWN0LmNvbS9lbi8xLjExL3JlZi9mb3Jtcy9maWVsZHMvXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWVsZCB7XG4gIHB1YmxpYyByZWFkb25seSB2YWxpZGF0aW9uczogRmllbGRGZWVkYmFja1ZhbGlkYXRpb25bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBuYW1lOiBzdHJpbmcpIHt9XG5cbiAgYWRkT3JSZXBsYWNlVmFsaWRhdGlvbih2YWxpZGF0aW9uOiBGaWVsZEZlZWRiYWNrVmFsaWRhdGlvbikge1xuICAgIC8vIFNlZSBVcGRhdGUgaWYgZXhpc3RzIG9yIGFkZCBuZXcgZWxlbWVudCB0byBhcnJheSBvZiBvYmplY3RzIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80OTM3NTQ2NS85OTAzNTZcbiAgICBjb25zdCBpID0gdGhpcy52YWxpZGF0aW9ucy5maW5kSW5kZXgoX3ZhbGlkYXRpb24gPT4gX3ZhbGlkYXRpb24ua2V5ID09PSB2YWxpZGF0aW9uLmtleSk7XG4gICAgaWYgKGkgPiAtMSkgdGhpcy52YWxpZGF0aW9uc1tpXSA9IHZhbGlkYXRpb247XG4gICAgZWxzZSB0aGlzLnZhbGlkYXRpb25zLnB1c2godmFsaWRhdGlvbik7XG4gIH1cblxuICBjbGVhclZhbGlkYXRpb25zKCkge1xuICAgIGNsZWFyQXJyYXkodGhpcy52YWxpZGF0aW9ucyk7XG4gIH1cblxuICBoYXNGZWVkYmFja3NPZlR5cGUodHlwZTogRmllbGRGZWVkYmFja1R5cGUsIGZpZWxkRmVlZGJhY2tzS2V5Pzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsaWRhdGlvbnMuc29tZShmaWVsZEZlZWRiYWNrID0+XG4gICAgICAoZmllbGRGZWVkYmFja3NLZXkgPT09IHVuZGVmaW5lZCB8fCBmaWVsZEZlZWRiYWNrLmtleS5zdGFydHNXaXRoKGAke2ZpZWxkRmVlZGJhY2tzS2V5fS5gKSkgJiZcbiAgICAgIGZpZWxkRmVlZGJhY2sudHlwZSA9PT0gdHlwZSAmJiBmaWVsZEZlZWRiYWNrLnNob3cgPT09IHRydWVcbiAgICApO1xuICB9XG5cbiAgaGFzRXJyb3JzKGZpZWxkRmVlZGJhY2tzS2V5Pzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzRmVlZGJhY2tzT2ZUeXBlKEZpZWxkRmVlZGJhY2tUeXBlLkVycm9yLCBmaWVsZEZlZWRiYWNrc0tleSk7XG4gIH1cblxuICBoYXNXYXJuaW5ncyhmaWVsZEZlZWRiYWNrc0tleT86IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmhhc0ZlZWRiYWNrc09mVHlwZShGaWVsZEZlZWRiYWNrVHlwZS5XYXJuaW5nLCBmaWVsZEZlZWRiYWNrc0tleSk7XG4gIH1cblxuICBoYXNJbmZvcyhmaWVsZEZlZWRiYWNrc0tleT86IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmhhc0ZlZWRiYWNrc09mVHlwZShGaWVsZEZlZWRiYWNrVHlwZS5JbmZvLCBmaWVsZEZlZWRiYWNrc0tleSk7XG4gIH1cblxuICBoYXNGZWVkYmFja3MoZmllbGRGZWVkYmFja3NLZXk/OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNFcnJvcnMoZmllbGRGZWVkYmFja3NLZXkpIHx8XG4gICAgICAgICAgIHRoaXMuaGFzV2FybmluZ3MoZmllbGRGZWVkYmFja3NLZXkpIHx8XG4gICAgICAgICAgIHRoaXMuaGFzSW5mb3MoZmllbGRGZWVkYmFja3NLZXkpO1xuICB9XG5cbiAgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gIXRoaXMuaGFzRXJyb3JzKCk7XG4gIH1cbn1cbiJdfQ==